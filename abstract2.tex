Inline assembly code is common in system software to interact with
the underlying hardware platforms. Safety and correctness of the
assembly code is crucial to guarantee the safety of the whole
system. In this paper we propose a practical Hoare-style program
logic for verifying SPARC assembly code. The logic supports
modular reasoning about the main features of SPARCv8 ISA, including
delayed control transfers, delayed writes to special registers,
and register windows. We extend to it support contextual refinement 
verification, and apply it to verify that there is a contextual 
refinement between a context switch routine in \sparc{} and 
$\primsw{}$ primitive. The program logic and its soundness proof 
have been mechanized in Coq. 
% We have applied it
% to verify the main body of a context switch routine in a realistic 
% embedded OS kernel, and extended it to support 
% contextual refinement verification.
% All of the formalization and proofs have been mechanized in Coq. 